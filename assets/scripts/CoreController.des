# CoreController.ts 说明

## 目的
管理玩家的核心生命系统——位于拍板下方的重要组件，代表玩家的实际生命值。核心拥有独立的生命值、再生机制和升级系统。

## 关键特性

### 生命系统
- **核心生命值**：独立于传统“生命值”系统，代表实际生存能力
- **最大生命值**：随核心等级提升（基础值10，每级+2）
- **当前生命值**：实时追踪生命状态并提供视觉反馈
- **死亡条件**：核心生命值归零即游戏结束

### 再生机制
- **恢复速率**：被动持续治疗（默认值：0.1生命值/秒）
- **恢复延迟**：受损后需等待5秒方可启动治疗
- **视觉反馈**：恢复期间核心呈青色发光
- **战术时机**：鼓励受损后采取防御姿态

### 经验与升级
- **经验值**：通过收集特定砖块掉落的经验球获取
- **等级提升**：核心升级可增强属性
- **等级上限**：每升1级需100经验值（可调整进度机制）
- **等级加成**：每升1级提升最大生命值（+2）与再生速率（+0.05/秒）

### 伤害来源
- **直接球击：当球绕过球拍直接击中核心时
- **BOSS攻击：BOSS技能直接对核心造成伤害
- **压力伤害：当砖块达到球拍高度时（通过LevelManager触发）
- **环境危害：预留未来扩展伤害来源的空间
- **直接球击**：当球绕过球拍直接击中核心时- **BOSS攻击**：BOSS技能直接对核心造成伤害- **压力伤害**：当砖块达到球拍高度时（通过LevelManager控制）


### 视觉反馈系统
- **生命值颜色**：绿色（>70%）、黄色（30-70%）、红色（<30%）
- **受损闪烁**：受损时红色闪烁
- **恢复光效**：治疗期间呈现青色光芒
- **升级特效**：等级提升时出现明亮脉动效果

## 在Cocos Creator中的使用方法

### 1. 创建核心游戏对象
```
1. 在GameScene中创建新节点（位置位于拍板区域下方）
2. 添加Sprite组件实现视觉呈现
3. 添加RigidBody2D组件（类型：静态）
4. 添加BoxCollider2D组件用于碰撞检测
5. 设置为触发器以收集经验球
6. 将CoreController.ts脚本附加至该节点
```

### 2. 配置核心属性
```
检查器设置：
- 核心最大生命值：10（初始生命值）
- 恢复速率：0.1（每秒恢复生命值）
- 恢复延迟：5.0（受损后恢复间隔秒数）
- 经验容量：100（升级所需经验值）
```

### 3. 物理设置
```
碰撞组：
- 核心应归入“CORE”组
- 启用与以下组的碰撞检测：
  * “BALL”组（用于漏接球伤害）
  * “EXPERIENCE_ORB”组（用于经验值收集）
  * “BOSS_ATTACK”组（用于BOSS伤害）
- 禁用与“砖块”和“拍板”组的碰撞
```

### 4. 视觉设计
```
精灵要求：
- 核心需具备视觉辨识度（宝石/水晶/能量核心）
- 尺寸应与重要性成比例（大于球体，小于拍板）
- 基础色需支持生命值相关的颜色变化
- 考虑使用动画精灵提升视觉吸引力
```

### 5. 集成要点
```
游戏管理器集成：
- 为游戏管理器添加 onCoreDestroyed() 方法
- 为游戏管理器添加 onCoreAttacked(damage) 方法
- 关联生命值系统（核心死亡即游戏结束，不受剩余生命影响）

界面集成：
- 生命条显示当前/最大核心生命值
- 经验条显示升级进度
- 核心等级指示器
- 再生状态指示器
```

## 游戏平衡考量

### 生命值成长机制
- 初始生命值（10）应能承受10次球体撞击
- 生命值成长（每级+2）提供显著的成长体验
- 最大可达生命值需与伤害来源保持平衡

### 生命回复平衡
- 基础回复（0.1/秒）每10秒恢复1点生命值
- 5秒延迟机制阻止战斗中恢复
- 恢复速率提升（每级+0.05/秒）增强生存能力

### 经验值需求
- 每级100经验值设定明确升级目标
- 经验球稀有度需确保升级过程富有意义
- 高等级可采用指数级经验值需求

### 伤害系统整合
- 普通球体伤害设定为1点生命值
- 头目攻击应造成2+点生命值伤害（威胁值提升）
- 压力伤害应随剩余砖块数量递增
- 暴击或特殊攻击可附加额外伤害

## 策略性玩法要素
### 风险与回报机制
- 玩家需权衡进攻型打法（更高球速/更高风险）与防守型打法（更稳固站位）
- 经验球收集需靠近漏接球的位置
- 生命值恢复机制催生战术性撤退与站位决策

### 难度递进设计
- 初级关卡：生命值恢复可轻松抵消轻微伤害
- 中级关卡：伤害频率挑战恢复能力极限
- 高级关卡：爆发性伤害威胁核心存活，即便具备恢复能力

### 强化道具整合
- 治疗道具可瞬间恢复生命值
- 经验值倍增道具加速核心升级
- 抗伤道具暂时降低核心承受伤害

## 未来增强构想
- 特定等级解锁核心专属技能
- 不同核心类型拥有独特再生模式
- 核心能量系统用于释放特殊能力
- 核心护甲升级降低所受伤害
- 声望系统实现核心转生并获取增益
