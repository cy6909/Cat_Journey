# 经验球.ts 说明

## 用途
管理特殊砖块掉落的经验球，当被拍板或核心直接收集时，可提供升级核心所需的经验值。

## 核心特性

### 掉落机制
- **下落物理**：球体垂直下落并伴随轻微随机水平偏移
- **存续时间**：未被收集时8秒后自动销毁
- **掉落来源**：特殊砖块有10%概率掉落经验球
- **视觉设计**：需与强化道具区分（建议：蓝紫色辉光）

### 磁力系统
- **感应范围**：球体进入球拍或核心150单位范围内即被吸引
- **目标优先级**：自动锁定最近有效收集器（球拍或核心）
- **吸引力**：进入范围后产生强磁力（500力值）
- **智能收集**：同时支持拍板拦截与核心收集

### 经验值机制
- **基础值**：每颗球体10点经验值（可配置）
- **可扩展性**：不同球体类型可提供不同经验值
- **核心整合**：收集后自动将经验值累加至核心控制器
- **收集反馈**：通过视觉效果和控制台提示反馈收集状态

### 物理行为
- **RigidBody2D**：实现真实下落运动的动态物理系统
- **碰撞检测**：接触拍板或核心时触发
- **速度控制**：初始下坠速度含随机水平分量
- **磁力覆盖**：激活时吸引力系统覆盖重力

## Cocos Creator 使用指南

### 1. 创建体验球预制件
```
1. 在场景中创建新节点
2. 添加具有独特视觉效果的Sprite组件（推荐蓝/紫色球体）
3. 添加RigidBody2D组件（类型：DYNAMIC）
4. 添加CircleCollider2D组件（IsTrigger: true用于收集）
5. 将ExperienceOrb.ts脚本附加至节点
6. 保存为assets/prefabs/目录下的ExperienceOrb.prefab
```

### 2. 配置球体属性
```
检查器设置：
- 坠落速度：200.0（下坠移动速度）
- 经验值：10（收集时授予的经验值）
- 存活时间：8.0（自动销毁前的秒数）
- 磁力范围：150.0（吸引力激活距离）
```

### 3. 物理设置
```
碰撞组：
- 经验球应归入“EXPERIENCE_ORB”组
- 启用与以下组的碰撞检测：
  * “PADDLE”组（用于拍板收集）
  * “CORE”组（用于直接收集核心）
- 禁用与“BRICK”、“BALL”及“WALL”组的碰撞
```

### 4. 视觉设计规范
```
精灵要求：
- 采用鲜明配色方案（蓝/紫色以区别于黄色能量道具）
- 添加发光或脉动效果体现数值
- 尺寸小于能量道具但大于常规粒子
- 可选：添加能量漩涡或旋转的动态精灵
```

### 5. 与砖块系统的集成
```
Brick.ts 集成方案：
- 在Brick.ts中添加dropsExperience布尔属性
- 在GameManager.createBricksFromLayout()中设置10%砖块掉落经验值
- 调用GameManager.onBrickDestroyed()时传入dropsExperience参数
- 游戏管理器在砖块位置处理能量球实例化
```

### 6. 收集机制
```
收集目标：
- 拍板：玩家可通过移动拍板主动收集能量球
- 核心：漏接的能量球仍可由核心收集（安全网机制）
- 磁力：两种目标均可吸引范围内能量球，便于收集
```

## 游戏平衡考量

### 经验值经济
- **收集率**：每摧毁10块砖约获得1颗能量球（掉落率10%）
- **等级经验值**：核心升级需100经验值 = 约摧毁100块砖 = 约10个等级
- **风险与回报**：玩家需通过位置调整进行收集，形成策略性移动
- **安全机制**：核心收集可避免因漏接能量球导致经验值完全损失

### 磁力平衡
- **作用范围（150）**：足够宽容的收集距离，又需精准定位
- **吸引力（500）**：确保稳定收集的强度，避免破坏物理逻辑
- **目标优先级**：锁定最近目标，避免多目标场景混乱

### 存续时间平衡
- **持续时间（8秒）**：既提供战术收集空间，又营造紧迫感
- **下落速度（200）**：约3-4秒横穿屏幕，预留磁吸收集时间
- **自动消亡机制**：避免界面拥挤与性能问题

## 战术玩法要素

### 收集策略
- **主动收集**：玩家移动拍板拦截下落的能量球
- **被动收集**：核心可作为备用收集器接住漏接的能量球
- **风险管理**：激进收集可能使拍板暴露于危险中
- **时机窗口**：磁力机制可弥补时机把握不精准的情况

### 进度影响
- **核心升级**：经验值直接提升核心等级带来的生存能力
- **生命值递增**：每提升一级核心，最大生命值与回复速度同步增长
- **长期效益**：持续收集经验可实现永久性角色成长
- **技巧奖励**：优秀玩家通过精准走位获取更多经验值

### 视觉反馈
- **收集特效**：收集时触发强光闪烁或粒子爆裂
- **数值提示**：不同色球体可标示不同经验值
- **磁力视觉**：吸引目标时呈现轨迹或辉光
- **时效预警**：临近失效时闪烁或变色

## 未来增强方案
- **能量球类型**：设定不同数值、颜色及特效
- **经验值倍增器**：提供临时经验值获取加成的强化道具
- **磁力升级**：提升吸引力范围或强度的遗物道具
- **收集奖励**：连续收集触发的连击奖励
- **精英能量球**：来自精英砖块或首领的稀有高价值能量球