{"version":3,"sources":["file:///E:/work_space/wx/Cat_Journey/assets/scripts/CanvasBackgroundTest.ts"],"names":["_decorator","Component","Sprite","SpriteFrame","Texture2D","Color","UITransform","Graphics","ccclass","property","CanvasBackgroundTest","onLoad","console","log","setupBackground","transform","node","getComponent","addComponent","setContentSize","setAnchorPoint","width","height","existingGraphics","existingSprites","getComponents","destroy","forEach","sprite","useGraphics","createGraphicsBackground","createSpriteBackground","graphics","fillColor","rect","fill","texture","reset","format","PixelFormat","RGBA8888","data","Uint8Array","uploadData","spriteFrame","type","Type","SIMPLE","sizeMode","SizeMode","CUSTOM","color","WHITE"],"mappings":";;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,Q,OAAAA,Q;;;;;;;;;OAC9E;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBT,U;;sCAGjBU,oB,WADZF,OAAO,CAAC,sBAAD,C,2BAAR,MACaE,oBADb,SAC0CT,SAD1C,CACoD;AAAA;AAAA;;AAAA;AAAA;;AAEZ;AAE1BU,QAAAA,MAAM,GAAS;AACrBC,UAAAA,OAAO,CAACC,GAAR,CAAY,4CAAZ;AACA,eAAKC,eAAL;AACH;;AAEOA,QAAAA,eAAe,GAAS;AAC5B;AACA,cAAIC,SAAS,GAAG,KAAKC,IAAL,CAAUC,YAAV,CAAuBX,WAAvB,CAAhB;;AACA,cAAI,CAACS,SAAL,EAAgB;AACZA,YAAAA,SAAS,GAAG,KAAKC,IAAL,CAAUE,YAAV,CAAuBZ,WAAvB,CAAZ;AACH;;AAEDS,UAAAA,SAAS,CAACI,cAAV,CAAyB,GAAzB,EAA8B,GAA9B;AACAJ,UAAAA,SAAS,CAACK,cAAV,CAAyB,GAAzB,EAA8B,GAA9B;AACAR,UAAAA,OAAO,CAACC,GAAR,CAAa,WAAUE,SAAS,CAACM,KAAM,IAAGN,SAAS,CAACO,MAAO,EAA3D,EAT4B,CAW5B;;AACA,gBAAMC,gBAAgB,GAAG,KAAKP,IAAL,CAAUC,YAAV,CAAuBV,QAAvB,CAAzB;AACA,gBAAMiB,eAAe,GAAG,KAAKR,IAAL,CAAUS,aAAV,CAAwBvB,MAAxB,CAAxB;AAEA,cAAIqB,gBAAJ,EAAsBA,gBAAgB,CAACG,OAAjB;AACtBF,UAAAA,eAAe,CAACG,OAAhB,CAAwBC,MAAM,IAAIA,MAAM,CAACF,OAAP,EAAlC;;AAEA,cAAI,KAAKG,WAAT,EAAsB;AAClB,iBAAKC,wBAAL;AACH,WAFD,MAEO;AACH,iBAAKC,sBAAL;AACH;AACJ;;AAEOD,QAAAA,wBAAwB,GAAS;AACrClB,UAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;AAEA,gBAAMmB,QAAQ,GAAG,KAAKhB,IAAL,CAAUE,YAAV,CAAuBX,QAAvB,CAAjB;AACA,gBAAMQ,SAAS,GAAG,KAAKC,IAAL,CAAUC,YAAV,CAAuBX,WAAvB,CAAlB,CAJqC,CAMrC;;AACA0B,UAAAA,QAAQ,CAACC,SAAT,GAAqB,IAAI5B,KAAJ,CAAU,GAAV,EAAe,CAAf,EAAkB,GAAlB,EAAuB,GAAvB,CAArB;AACA2B,UAAAA,QAAQ,CAACE,IAAT,CACI,CAACnB,SAAS,CAACM,KAAX,GAAmB,CADvB,EAEI,CAACN,SAAS,CAACO,MAAX,GAAoB,CAFxB,EAGIP,SAAS,CAACM,KAHd,EAIIN,SAAS,CAACO,MAJd;AAMAU,UAAAA,QAAQ,CAACG,IAAT;AAEAvB,UAAAA,OAAO,CAACC,GAAR,CAAa,mBAAkBE,SAAS,CAACM,KAAM,IAAGN,SAAS,CAACO,MAAO,EAAnE;AACH;;AAEOS,QAAAA,sBAAsB,GAAS;AACnCnB,UAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AAEA,gBAAME,SAAS,GAAG,KAAKC,IAAL,CAAUC,YAAV,CAAuBX,WAAvB,CAAlB,CAHmC,CAKnC;;AACA,gBAAM8B,OAAO,GAAG,IAAIhC,SAAJ,EAAhB;AACAgC,UAAAA,OAAO,CAACC,KAAR,CAAc;AACVhB,YAAAA,KAAK,EAAE,CADG;AAEVC,YAAAA,MAAM,EAAE,CAFE;AAGVgB,YAAAA,MAAM,EAAElC,SAAS,CAACmC,WAAV,CAAsBC;AAHpB,WAAd,EAPmC,CAanC;;AACA,gBAAMC,IAAI,GAAG,IAAIC,UAAJ,CAAe,CAAC,GAAD,EAAM,CAAN,EAAS,GAAT,EAAc,GAAd,CAAf,CAAb;AACAN,UAAAA,OAAO,CAACO,UAAR,CAAmBF,IAAnB,EAfmC,CAiBnC;;AACA,gBAAMG,WAAW,GAAG,IAAIzC,WAAJ,EAApB;AACAyC,UAAAA,WAAW,CAACR,OAAZ,GAAsBA,OAAtB,CAnBmC,CAqBnC;;AACA,gBAAMR,MAAM,GAAG,KAAKZ,IAAL,CAAUE,YAAV,CAAuBhB,MAAvB,CAAf;AACA0B,UAAAA,MAAM,CAACgB,WAAP,GAAqBA,WAArB;AACAhB,UAAAA,MAAM,CAACiB,IAAP,GAAc3C,MAAM,CAAC4C,IAAP,CAAYC,MAA1B;AACAnB,UAAAA,MAAM,CAACoB,QAAP,GAAkB9C,MAAM,CAAC+C,QAAP,CAAgBC,MAAlC;AACAtB,UAAAA,MAAM,CAACuB,KAAP,GAAe9C,KAAK,CAAC+C,KAArB;AAEAxC,UAAAA,OAAO,CAACC,GAAR,CAAa,cAAb;AACH;;AAlF+C,O,8EAC/CJ,Q;;;;;iBAC6B,I","sourcesContent":["import { _decorator, Component, Sprite, SpriteFrame, Texture2D, Color, UITransform, Graphics } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('CanvasBackgroundTest')\r\nexport class CanvasBackgroundTest extends Component {\r\n    @property\r\n    public useGraphics: boolean = true; // 优先使用Graphics\r\n\r\n    protected onLoad(): void {\r\n        console.log('=== CanvasBackgroundTest: Canvas相机背景测试 ===');\r\n        this.setupBackground();\r\n    }\r\n\r\n    private setupBackground(): void {\r\n        // 1. 设置节点尺寸\r\n        let transform = this.node.getComponent(UITransform);\r\n        if (!transform) {\r\n            transform = this.node.addComponent(UITransform);\r\n        }\r\n        \r\n        transform.setContentSize(960, 640);\r\n        transform.setAnchorPoint(0.5, 0.5);\r\n        console.log(`设置节点尺寸: ${transform.width}x${transform.height}`);\r\n        \r\n        // 2. 清除现有组件\r\n        const existingGraphics = this.node.getComponent(Graphics);\r\n        const existingSprites = this.node.getComponents(Sprite);\r\n        \r\n        if (existingGraphics) existingGraphics.destroy();\r\n        existingSprites.forEach(sprite => sprite.destroy());\r\n\r\n        if (this.useGraphics) {\r\n            this.createGraphicsBackground();\r\n        } else {\r\n            this.createSpriteBackground();\r\n        }\r\n    }\r\n\r\n    private createGraphicsBackground(): void {\r\n        console.log('使用Graphics创建背景');\r\n        \r\n        const graphics = this.node.addComponent(Graphics);\r\n        const transform = this.node.getComponent(UITransform);\r\n        \r\n        // 创建洋红色矩形\r\n        graphics.fillColor = new Color(255, 0, 255, 255);\r\n        graphics.rect(\r\n            -transform.width / 2,\r\n            -transform.height / 2,\r\n            transform.width,\r\n            transform.height\r\n        );\r\n        graphics.fill();\r\n        \r\n        console.log(`Graphics矩形创建完成: ${transform.width}x${transform.height}`);\r\n    }\r\n\r\n    private createSpriteBackground(): void {\r\n        console.log('使用Sprite创建背景');\r\n        \r\n        const transform = this.node.getComponent(UITransform);\r\n        \r\n        // 创建1x1像素纹理\r\n        const texture = new Texture2D();\r\n        texture.reset({\r\n            width: 1,\r\n            height: 1,\r\n            format: Texture2D.PixelFormat.RGBA8888\r\n        });\r\n\r\n        // 洋红色像素数据\r\n        const data = new Uint8Array([255, 0, 255, 255]);\r\n        texture.uploadData(data);\r\n\r\n        // 创建SpriteFrame\r\n        const spriteFrame = new SpriteFrame();\r\n        spriteFrame.texture = texture;\r\n\r\n        // 添加Sprite组件\r\n        const sprite = this.node.addComponent(Sprite);\r\n        sprite.spriteFrame = spriteFrame;\r\n        sprite.type = Sprite.Type.SIMPLE;\r\n        sprite.sizeMode = Sprite.SizeMode.CUSTOM;\r\n        sprite.color = Color.WHITE;\r\n        \r\n        console.log(`Sprite背景创建完成`);\r\n    }\r\n}"]}